# üîÆ Tarot Luna Mini App ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É

## ‚ö†Ô∏è –í–ê–ñ–ù–û!

**Preview –≤ Lovable –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –±—ç–∫–µ–Ω–¥–æ–º!**

Preview —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–±–ª–∞–∫–µ Lovable –∏ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ `localhost:8080` –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –í–°–Å –ª–æ–∫–∞–ª—å–Ω–æ.

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (Windows PowerShell)

### –®–∞–≥ 1: –°–∫–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
2. –ù–∞–∂–∞—Ç—å **Code ‚Üí Download ZIP**
3. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤ –≤ —É–¥–æ–±–Ω—É—é –ø–∞–ø–∫—É

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥ (Python)

–û—Ç–∫—Ä—ã—Ç—å **–ø–µ—Ä–≤—ã–π PowerShell** –≤ –ø–∞–ø–∫–µ `–¢–ê–†–û`:

```powershell
cd –¢–ê–†–û

# –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫–∏ –¥–ª—è –ë–î –∏ –ª–æ–≥–æ–≤
mkdir database -Force
mkdir logs -Force

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–¥–∏–Ω —Ä–∞–∑)
pip install -r requirements.txt

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ + API —Å–µ—Ä–≤–µ—Ä
python main.py
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üîÆ Logging setup completed
‚úÖ Production mode: INFO logs, minimal spam, webhook disabled by default
üíæ Database initialized
‚è∞ Scheduler started with YooMoney payment checking
üåê API server started on http://0.0.0.0:8080
üîÆ Starting bot...
```

> ‚ö†Ô∏è **–ö—Ä–∏—Ç–∏—á–Ω–æ:** –í –ª–æ–≥–∞—Ö –î–û–õ–ñ–ù–ê –±—ã—Ç—å —Å—Ç—Ä–æ–∫–∞ `üåê API server started on http://0.0.0.0:8080`

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API

–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:8080/api/health**

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è JSON:
```json
{"success": true, "status": "ok", "message": "API is running"}
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (React)

–û—Ç–∫—Ä—ã—Ç—å **–≤—Ç–æ—Ä–æ–π PowerShell** –≤ **–∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞** (–ù–ï –≤ –ø–∞–ø–∫–µ –¢–ê–†–û):

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–æ–¥–∏–Ω —Ä–∞–∑)
npm install

# –ó–∞–ø—É—Å—Ç–∏—Ç—å dev-—Å–µ—Ä–≤–µ—Ä
npm run dev
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
  VITE v5.x.x  ready in XXX ms

  ‚ûú  Local:   http://localhost:5173/
  ‚ûú  Network: http://192.168.x.x:5173/
```

### –®–∞–≥ 5: –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–µ—Ä–µ–π—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: **http://localhost:5173/**

–í—ã —É–≤–∏–¥–∏—Ç–µ:
1. –≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª ‚Üí –Ω–∞–∂–∞—Ç—å "–°–æ–≥–ª–∞—Å–µ–Ω"
2. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –±–∞–ª–∞–Ω—Å–æ–º –∏–∑ –ë–î
3. –†–∞—Å–∫–ª–∞–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º AI

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tarobuda/
‚îú‚îÄ‚îÄ –¢–ê–†–û/                    # Python –±—ç–∫–µ–Ω–¥ (–±–æ—Ç + API)
‚îÇ   ‚îú‚îÄ‚îÄ main.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ api.py              # REST API –¥–ª—è Mini App
‚îÇ   ‚îú‚îÄ‚îÄ ohmygpt_api.py      # AI (OhMyGPT)
‚îÇ   ‚îú‚îÄ‚îÄ database.py         # SQLite
‚îÇ   ‚îú‚îÄ‚îÄ yoomoney.py         # –ü–ª–∞—Ç–µ–∂–∏
‚îÇ   ‚îú‚îÄ‚îÄ handlers.py         # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .env                # –°–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏
‚îÇ   ‚îú‚îÄ‚îÄ database/           # –ü–∞–ø–∫–∞ –¥–ª—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ logs/               # –ü–∞–ø–∫–∞ –¥–ª—è –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt    # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ
‚îú‚îÄ‚îÄ src/                     # React —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îÇ   ‚îú‚îÄ‚îÄ pages/              # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ components/         # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ contexts/           # React –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
‚îÇ
‚îú‚îÄ‚îÄ public/assets/cards/    # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç –¢–∞—Ä–æ
‚îú‚îÄ‚îÄ .env                     # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ package.json            # Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ë—ç–∫–µ–Ω–¥: –¢–ê–†–û/.env

```env
BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–æ—Ç_botfather
ADMIN_ID=–≤–∞—à_telegram_id
ADMIN_CARD_NUMBER=2200 1536 4107 5578
CARD_NUMBER=2200 1536 4107 5578
OHMYGPT_API_KEY=–≤–∞—à_–∫–ª—é—á_ohmygpt
BOT_USERNAME=TarotLunaSunBot
DB_PATH=database/database.db
LOG_PATH=logs/bot.log
YOOMONEY_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_yoomoney
YOOMONEY_WEBHOOK_ENABLED=false
YOOMONEY_NOTIFICATION_SECRET=supersecret123
YOOMONEY_WEBHOOK_HOST=0.0.0.0
YOOMONEY_WEBHOOK_PORT=8080
YOOMONEY_WEBHOOK_PATH=/yoomoney-webhook
```

### –§—Ä–æ–Ω—Ç–µ–Ω–¥: .env (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

```env
VITE_API_URL=http://localhost:8080
```

---

## API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/api/health` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ |
| POST | `/api/auth` | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram |
| GET | `/api/user` | –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/reading` | –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å–∫–ª–∞–¥ (—Ç—Ä–∞—Ç–∏—Ç –∑–∞–ø—Ä–æ—Å) |
| GET | `/api/history` | –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å–∫–ª–∞–¥–æ–≤ |
| POST | `/api/payment` | –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É |
| GET | `/api/rates` | –¢–∞—Ä–∏—Ñ—ã –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã |
| GET | `/api/achievements` | –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |

---

## –ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–ª—è Telegram

### –í–∞—Ä–∏–∞–Ω—Ç A: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ngrok

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å [ngrok](https://ngrok.com/)
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—É–Ω–Ω–µ–ª—å:
   ```bash
   ngrok http 5173
   ```
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–Ω—ã–π URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.ngrok.io`)
4. –í @BotFather: `/setmenubutton` ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å URL

### –í–∞—Ä–∏–∞–Ω—Ç B: –•–æ—Å—Ç–∏–Ω–≥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

1. –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–∞ Vercel/Netlify/Lovable
2. –ü–æ–ª—É—á–∏—Ç—å URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://tarot-luna.vercel.app`)
3. –í @BotFather: `/setmenubutton` ‚Üí –≤—Å—Ç–∞–≤–∏—Ç—å URL

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –î–ª—è production –Ω—É–∂–Ω–æ —Ç–∞–∫–∂–µ –∑–∞—Ö–æ—Å—Ç–∏—Ç—å –±—ç–∫–µ–Ω–¥ –Ω–∞ VPS/—Å–µ—Ä–≤–µ—Ä–µ!

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### "–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É"

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –±—ç–∫–µ–Ω–¥ –∑–∞–ø—É—â–µ–Ω (`python main.py`)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –µ—Å—Ç—å `üåê API server started`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å http://localhost:8080/api/health
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `.env` —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞: `VITE_API_URL=http://localhost:8080`

### "ModuleNotFoundError: No module named 'xxx'"

```powershell
cd –¢–ê–†–û
pip install -r requirements.txt
```

### "API server failed to start" (–ø–æ—Ä—Ç –∑–∞–Ω—è—Ç)

```powershell
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 8080
netstat -ano | findstr :8080

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (–∑–∞–º–µ–Ω–∏—Ç—å PID)
taskkill /PID <PID> /F
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è

```powershell
cd –¢–ê–†–û
mkdir database -Force
mkdir logs -Force
```

### CORS –æ—à–∏–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `VITE_API_URL=http://localhost:8080`
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞

---

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

‚úÖ **–≠–∫—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª** ‚Äî —Å–æ–≥–ª–∞—Å–∏–µ 18+, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å  
‚úÖ **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é** ‚Äî –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞  
‚úÖ **–†–∞—Å–∫–ª–∞–¥** ‚Äî –≤—ã–±–æ—Ä –≤–æ–ø—Ä–æ—Å–∞, –∫–∞—Ä—Ç, AI-—Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ –æ—Ç "–õ—É–Ω—ã"  
‚úÖ **–ú–∞–≥–∞–∑–∏–Ω** ‚Äî –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ YooMoney  
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è** ‚Äî –≤—Å–µ –ø—Ä–æ—à–ª—ã–µ —Ä–∞—Å–∫–ª–∞–¥—ã  
‚úÖ **–ü—Ä–æ—Ñ–∏–ª—å** ‚Äî –±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —É—Ä–æ–≤–µ–Ω—å  
‚úÖ **–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è** ‚Äî –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å  

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

Telegram: @katya_katerina_bu

üåô‚ú® –£–¥–∞—á–Ω—ã—Ö —Ä–∞—Å–∫–ª–∞–¥–æ–≤! üîÆ
